<h2>Admin Messages</h2>
<table id="table"></table>
<script>
async function login() {
  const password = prompt("Enter admin password");

  const res = await fetch("/api/admin/login", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ password })
  });

if (!res.ok) {
  alert("Wrong password");
  return;
}

  localStorage.setItem("adminToken", "ok");
  loadMessages();
}

async function loadMessages() {
  const res = await fetch("/api/admin/messages", {
    headers: {
      "x-admin-token": localStorage.getItem("adminToken")
    }
  });

  const data = await res.json();
  console.log(data);
}

login();
</script>

