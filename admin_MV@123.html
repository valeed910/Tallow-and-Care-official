<script>
  const pass = prompt("Enter admin password:");
  if (pass !== "your-secret-password") {
    document.body.innerHTML = "Access denied";
    throw new Error("Denied");
  }
</script>

<h2>Admin Messages</h2>
<table id="table"></table>
<script>
  console.log("Admin JS loaded");
fetch("https://tallow-and-care-official.onrender.com/api/admin/messages", {
  method: "GET",
  headers: {
    "x-admin-key": "supersecret123"
  }
})
.then(res => res.json())
.then(data => {
  const table = document.getElementById("table");
  data.forEach(m => {
    table.innerHTML += `
      <tr>
        <td>${m.name}</td>
        <td>${m.email}</td>
        <td>${m.message}</td>
      </tr>
    `;
  });
})
.catch(err => {
  console.error("FETCH FAILED:", err);
});
</script>
